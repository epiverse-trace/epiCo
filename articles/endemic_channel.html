<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Building an Endemic Channel with epiCo • epiCo</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Building an Endemic Channel with epiCo">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">epiCo</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/demographic_vignette.html">Analyzing demographic data with epiCo</a></li>
    <li><a class="dropdown-item" href="../articles/endemic_channel.html">Building an Endemic Channel with epiCo</a></li>
    <li><a class="dropdown-item" href="../articles/spatiotemporal_vignette.html">Spatiotemporal analyses with epiCo</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/epiCo/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Building an Endemic Channel with epiCo</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/epiCo/blob/main/vignettes/endemic_channel.Rmd" class="external-link"><code>vignettes/endemic_channel.Rmd</code></a></small>
      <div class="d-none name"><code>endemic_channel.Rmd</code></div>
    </div>

    
    
<p><strong>epiCo</strong>’s <em>endemic channel</em> module is a tool to
estimate a central tendency line and upper and lower limits for the
expected number of cases of a disease based on the historical data
provided by the user and a set of customized parameters.</p>
<p>The <code>endemic_channel</code> function allows users to:</p>
<ul>
<li>Estimate a central tendency measure (arithmetic mean, geometric
mean, or median).</li>
<li>Estimate a confidence interval (based on the selected central
tendency measure).</li>
<li>Select the epidemic (outlier) years in your data and decide how to
handle them.</li>
<li>Plot the estimated endemic channel with the parameters and/or
assumptions displayed.</li>
<li>Plot the current (observed) cases to evaluate your epidemiological
situation (i.e., the occurrence of an outbreak).</li>
</ul>
<p>In the following vignette, users will learn:</p>
<ol style="list-style-type: decimal">
<li>What is an endemic channel, and what are its benefits, drawbacks,
and cautions?</li>
<li>An example of the historical data needed to build an endemic
channel.</li>
<li>How to use the <code>endemic_channel</code> function.</li>
<li>How to interpret and communicate the results.</li>
</ol>
<div class="section level2">
<h2 id="what-is-an-endemic-channel">1. What is an endemic channel?<a class="anchor" aria-label="anchor" href="#what-is-an-endemic-channel"></a>
</h2>
<p>Using an endemic channel is a visual strategy to represent the
historical behavior of a disease in a specific region on an epidemic
curve that defines the central tendency of the cases during a year and
the upper and lower limits where cases are expected to vary. This plot
provides three lines known as “<em style="color: green;">Safety</em>”,
“<em style="color: orange;">Warning</em>”, and
“<em style="color: red;">Epidemic</em>” bands (Figure 1), which are
later used to define the epidemiological situation of the region based
on the current (observed) cases.</p>
<p>The broader definition and methodology for the endemic channel were
provided by <a href="https://iris.paho.org/handle/10665.2/8562" class="external-link">Bortman
(1999)</a>.</p>
<div class="figure">
<img src="../reference/figures/endemic_channel_figure.png" alt="Example of an endemic channel figure with the Safety, Warning, and Epidemic bands." width="100%"><p class="caption">
Example of an endemic channel figure with the Safety, Warning, and
Epidemic bands.
</p>
</div>
<p>The data needed to build an endemic channel is the weekly or monthly
incidence of the disease for previous years in the region of interest.
<strong>epiCo</strong> asks for at least one year of data, but endemic
channels are typically estimated with <em>5 to 7 years of
information</em>.</p>
<p>It is natural to presume that more years provide better estimations
since the statistical analyses will be more robust, but it is important
to have contextual information to ensure that transmission,
surveillance, or demographic conditions (among other factors) have not
changed during this period of time. Regarding the frequency of the data,
weekly incidence may provide more useful information about the disease
behavior and the moment in which an epidemiological warning should be
raised; however, it is up to the experience of the users, and their
context, whether this resolution of the data can be achieved.</p>
<p>Another common decision while building an endemic channel is to
ignore previous epidemic years to avoid misrepresenting the traditional
transmission dynamics. <strong>epiCo</strong> does not suggest epidemic
years automatically, but its <code>endemic_channel</code> function does
provide the option to annotate the outlier years and decide whether to
include, ignore, or adjust them. More data-gathering tips and sources
are provided later in this vignette.</p>
<div class="section level3">
<h3 id="the-central-tendency-measure-ctm">The central tendency measure (CTM)<a class="anchor" aria-label="anchor" href="#the-central-tendency-measure-ctm"></a>
</h3>
<p>To have a statistical summary of the disease behavior, the endemic
channel provides a central tendency measure (CTM) that should describe
the typical value of the historical data.</p>
<p>Since the nature of the epidemiological data tends not to be normal,
the typically used CTM in the endemic channels is the <em>geometric
mean</em>. This CTM is known to better represent the expected value of a
data set with a skewed distribution and/or is susceptible to outliers
(previous outbreaks). The <code>endemic_channel</code> function uses the
geometric mean as the default CTM, but the arithmetic mean or median can
be chosen according to the user’s experience and context.</p>
<p>It is important to note that as the geometric mean performs a
multiplication of the data, when zero cases are reported in a moment of
time, the estimation leads to a zero CTM. To avoid this,
<strong>epiCo</strong>’s <code>endemic_channel</code> function performs
a shift on the data to sum up one case (the default value) for all
observations, and then it subtracts this shift from the final
calculation. To avoid random selection of the shift, users can ask the
<code>endemic_channel</code> function to find an optimal value based on
<a href="https://doi.org/10.48550/arXiv.1806.06403" class="external-link">de la Cruz &amp;
Kreft (2019)</a>, or they can also ask to use a weighted method as
described by <a href="https://www.semanticscholar.org/paper/4d0946f3051945509175d7d9f2cfe9d8c290a219" class="external-link">Habib
(2012)</a>.</p>
<p>Finally, the <code>endemic_channel</code> function can perform a
Poisson test (unusual behavior method) on the historical data if it is
requested by the user after taking into account the pertinence of the
test, since it is mostly used for scenarios or diseases with very low
incidence records. This method uses the arithmetic mean as CTM.</p>
</div>
<div class="section level3">
<h3 id="the-upper-and-lower-limits">The upper and lower limits<a class="anchor" aria-label="anchor" href="#the-upper-and-lower-limits"></a>
</h3>
<p>The upper and lower limits of the endemic channel provide a
confidence interval that is used to define the epidemiological bands
previously described.</p>
<p><strong>epiCo</strong>’s <code>endemic_channel</code> function has
the following preset of limits according to the selected CTM:</p>
<ul>
<li>Arithmetic or geometric mean as CTM: mean +/- <em>t</em> value for a
95% CI multiplied by the variance of the data over the number of
observations.</li>
<li>Median as CTM: quantiles 0.25 and 0.75 as lower and upper limits,
respectively.</li>
<li>Poisson test (unusual behavior method): limits provided by a
two-sided Poisson test with a 0.95% CI</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="historical-data-needed-to-build-an-endemic-channel">2. Historical data needed to build an endemic channel<a class="anchor" aria-label="anchor" href="#historical-data-needed-to-build-an-endemic-channel"></a>
</h2>
<p>This section provides some strategies to obtain, handle, and gather
the historical data needed to build an endemic channel. It presumes that
the user has either the line list or incidence data for the disease of
interest or the need to consult historical data from the Colombian
National Surveillance System <a href="https://www.ins.gov.co/Direcciones/Vigilancia/Paginas/SIVIGILA.aspx" class="external-link">(SIVIGILA)</a>.</p>
<p>Regardless of the user´s case, the goal of this section is to create
an <code>incidence</code> object with historical data on the disease.
This object must account for the incidence of a single region (no groups
are allowed in the <code>endemic_channel</code> function), it must have
a weekly or monthly interval (epiweeks are also allowed), and it must
represent at least one year of information.</p>
<p>To have a broader understanding of the <code>incidence</code>
package, please refer to its <a href="https://www.repidemicsconsortium.org/incidence/" class="external-link">vignettes</a>.</p>
<div class="section level3">
<h3 id="historic-incidence-from-the-line-list-or-sivigila-data">Historic incidence from the line list or SIVIGILA data<a class="anchor" aria-label="anchor" href="#historic-incidence-from-the-line-list-or-sivigila-data"></a>
</h3>
<p>The endemic channel is more useful when data up to the immediate
previous year is available; however, this is not always possible for
users outside of the surveillance institutions. As an option, users can
access SIVIGILA’s line list data that is typically published until the
second semester of the year (i.e., data for 2022 was published in the
second semester of 2023).</p>
<p>For this example, the data provided in the data folder of the package
will be used. These data present the data for dengue cases for all
municipalities in Tolima for the years 2015 to 2021. In this case, we
will use the cases from the municipality of Ibagué to calculate the
respective endemic channel.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://epiverse-trace.github.io/epiCo/">epiCo</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.repidemicsconsortium.org/incidence/" class="external-link">incidence</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"epi_data"</span><span class="op">)</span></span>
<span><span class="va">data_event</span> <span class="op">&lt;-</span> <span class="va">epi_data</span></span>
<span></span>
<span><span class="va">data_ibague</span> <span class="op">&lt;-</span> <span class="va">data_event</span><span class="op">[</span><span class="va">data_event</span><span class="op">$</span><span class="va">cod_mun_o</span> <span class="op">==</span> <span class="fl">73001</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co">## Building the historic incidence data</span></span>
<span></span>
<span><span class="va">incidence_historic</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://www.repidemicsconsortium.org/incidence/reference/incidence.html" class="external-link">incidence</a></span><span class="op">(</span><span class="va">data_ibague</span><span class="op">$</span><span class="va">fec_not</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"1 epiweek"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">incidence_historic</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">dates</th>
<th align="left">weeks</th>
<th align="right">counts</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2012-01-01</td>
<td align="left">2012-W01</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">2012-01-08</td>
<td align="left">2012-W02</td>
<td align="right">20</td>
</tr>
<tr class="odd">
<td align="left">2012-01-15</td>
<td align="left">2012-W03</td>
<td align="right">17</td>
</tr>
<tr class="even">
<td align="left">2012-01-22</td>
<td align="left">2012-W04</td>
<td align="right">15</td>
</tr>
<tr class="odd">
<td align="left">2012-01-29</td>
<td align="left">2012-W05</td>
<td align="right">18</td>
</tr>
</tbody>
</table>
<p>When users have their own line list data, the goal is the same: to
clean and handle the data to build the <code>incidence</code> object
(named <code>incidence_historic</code> in the previous example). The key
message is that a list of dates that account for the event of interest
is needed to later be used in the <a href="https://www.repidemicsconsortium.org/incidence/" class="external-link"><code>incidence</code></a>
package.</p>
</div>
<div class="section level3">
<h3 id="setting-up-the-data-from-incidence-information">Setting up the data from incidence information<a class="anchor" aria-label="anchor" href="#setting-up-the-data-from-incidence-information"></a>
</h3>
<p>Future versions of <strong>epiCo</strong>’s
<code>endemic_channel</code> function will allow the users to import a
table accounting for periods of time (weeks or months) and count of
cases, so when they do not have specific information on the dates for
each case, the endemic channel can still be built.</p>
</div>
</div>
<div class="section level2">
<h2 id="using-epicos-endemic_channel-function">3. Using <strong>epiCo</strong>’s <code>endemic_channel</code>
function<a class="anchor" aria-label="anchor" href="#using-epicos-endemic_channel-function"></a>
</h2>
<p>After gathering the incidence data, users are ready to ask
<strong>epiCo</strong> to build an <em>endemic channel</em>.</p>
<p>The <code>endemic_channel</code> function has the following
parameters:</p>
<ul>
<li><p><code>incidence_historic</code>: An incidence object with the
case counts of the previous years</p></li>
<li><p><code>observations</code>: A numeric vector with the current
observations <em>(default = NULL)</em></p></li>
<li><p><code>method</code>: A string with the mean calculation method of
preference (“median”, “mean”, or “geometric”) or “unusual_behavior”
method (Poisson Distribution Test) <em>(default =
“geometric”)</em></p></li>
<li><p><code>geometric_method</code>: A string with the selected method
for geometric mean calculation (see epiCo’s geometric_mean function)
<em>(default = “shifted”)</em>.</p></li>
<li><p><code>outlier_years</code>: A numeric vector with the outlier
(epidemic) years <em>(default = NULL)</em>.</p></li>
<li>
<p><code>outliers_handling</code>: A string with the handling
decision regarding outlier years:</p>
<ul>
<li>ignored = data from outlier years will not be taken into account
<em>(default)</em>.</li>
<li>included = data from outlier years will take into account.</li>
<li>replaced_by_median = data from outlier years will be replaced with
the median and taken into account.</li>
<li>replaced_by_mean = data from outlier years will be replaced with the
mean and taken into account.</li>
<li>replaced_by_geometric_mean = data from outlier years will be
replaced with the geometric mean and taken into account.</li>
</ul>
</li>
<li><p><code>ci</code>: A numeric value to specify the confidence
interval to use with the geometric method <em>(default =
0.95)</em>.</p></li>
<li><p><code>plot</code>: A boolean for displaying a plot <em>(default =
FALSE)</em>.</p></li>
</ul>
<p>The output of <em>epiCo</em>’s <code>endemic_channel</code> function
is a dataframe with the observation, historical mean, and confidence
intervals, and a plot displaying the four epidemiological bands, the
current observations (if provided), and the methods and outliers
handling set by the user.</p>
<div class="section level3">
<h3 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h3>
<p>The following example uses the previously historic incidence accessed
from the SIVIGILA data source to build the 2021 <em>endemic channel</em>
for Ibagué City.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">observations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">40</span>, <span class="fl">52</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outlier_years</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2016</span>, <span class="fl">2019</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ibague_endemic_chanel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/endemic_channel.html">endemic_channel</a></span><span class="op">(</span></span>
<span>  incidence_historic <span class="op">=</span> <span class="va">incidence_historic</span>,</span>
<span>  observations <span class="op">=</span> <span class="va">observations</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"geometric"</span>,</span>
<span>  outlier_years <span class="op">=</span> <span class="va">outlier_years</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Data after 2022-12-25 were not used for the endemic channel calculation.</span></span></code></pre></div>
<div class="figure">
<img src="endemic_channel_files/figure-html/unnamed-chunk-4-1.png" alt="Dengue endemic channel for Ibagué in 2021" width="768"><p class="caption">
Dengue endemic channel for Ibagué in 2021
</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="interpretation-and-communication-of-results">4. Interpretation and communication of results<a class="anchor" aria-label="anchor" href="#interpretation-and-communication-of-results"></a>
</h2>
<p>The endemic channel is a visualization tool to stratify the
epidemiological situation of a region. The instructions to gather,
process and interpret the results are responsibility of the governmental
institutions.</p>
<p>The communication of results is typically done in a framework of risk
assessment, early warning protocols, and epidemic response leaded by
public health officers. It is important to adjust the use of
<em>epiCo</em> to the official guidelines from where is implemented.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Juan D. Umaña, Juan Montenegro-Torres, Julian Otero.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
